<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Interactive Cytoscape Network</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
</head>
<body>

  <div id="controls">
    <h2>Instellingen</h2>
    <button id="toggle_hover" data-shown="false" style="margin-bottom:8px;">Toon alle titels</button><br/>
    <button id="toggle_all_labels" data-hidden="false" style="margin-bottom:8px;">Verberg alle inhoudelijke labels</button><br/><br/>
    <strong>Filter inhoudelijke labels:</strong>
    <fieldset>
      <legend>Perspectief</legend>
      <!-- aangepast: Surinaams → Afro-Surinaams -->
      <label><input type="checkbox" id="filter_10" data-filter-label="label:Afro-Surinaams perspectief" checked> Afro-Surinaams perspectief</label><br/>
      <!-- nieuw toegevoegd -->
      <label><input type="checkbox" id="filter_48" data-filter-label="label:Hindostaans perspectief" checked> Hindostaans perspectief</label><br/>
      <label><input type="checkbox" id="filter_49" data-filter-label="label:Javaans perspectief" checked> Javaans perspectief</label><br/>
      <label><input type="checkbox" id="filter_50" data-filter-label="label:Inheems perspectief" checked> Inheems perspectief</label><br/>
      <!-- bestaande -->
      <label><input type="checkbox" id="filter_18" data-filter-label="label:Nederlands perspectief" checked> Nederlands perspectief</label><br/>
      <label><input type="checkbox" id="filter_8"  data-filter-label="label:Surinaamse diaspora" checked> Surinaamse diaspora</label>
    </fieldset>
    <!-- de overige fieldsets (‘Politieke lading’, ‘Onderwerp genoemd’, ‘Verschijningscontext’) ongewijzigd -->
  </div>

  <div id="cy"></div>
  <div id="tooltip"></div>
  <div id="info-panel"></div>

  <style>
    /* je bestaande CSS onveranderd */
  </style>

  <script>
    var cy = cytoscape({
      container: document.getElementById('cy'),
      elements: [
        // ────────────── LABEL-NODES ─────────────────────────
        {"data": {"id": 10, "label": "label:Afro-Surinaams perspectief"}, "classes": "label", "position": {"x": -363.64, "y": -21.46}, "style": {"background-color": "#68ad36","width":50,"height":50}},
        {"data": {"id": 48, "label": "label:Hindostaans perspectief"},  "classes": "label", "position": {"x": -200, "y": -200},     "style": {"background-color": "#68ad36","width":50,"height":50}},
        {"data": {"id": 49, "label": "label:Javaans perspectief"},     "classes": "label", "position": {"x":    0, "y": -200},     "style": {"background-color": "#68ad36","width":50,"height":50}},
        {"data": {"id": 50, "label": "label:Inheems perspectief"},      "classes": "label", "position": {"x":  200, "y": -200},     "style": {"background-color": "#68ad36","width":50,"height":50}},
        // ────────────── ÓÓK ALLE OORSPRONKELIJKE LABELS ────────────────
        {"data": {"id": 8,  "label": "label:Surinaamse diaspora"},      "classes": "label", "position": {"x": 125.31, "y": 435.83}, "style": {"background-color":"#ff743e","width":50,"height":50}},
        {"data": {"id": 18, "label": "label:Nederlands perspectief"},   "classes": "label", "position": {"x": 388.13, "y": -175.81},"style": {"background-color":"#d27cce","width":50,"height":50}},
        {"data": {"id": 23, "label": "label:Nationalisme"},              "classes": "label", "position": {"x": -245.04,"y": 322.88},"style": {"background-color":"#68ad36","width":50,"height":50}},
        {"data": {"id": 31, "label": "label:Milieuactivisme"},           "classes": "label", "position": {"x": -229.45,"y": -469.34},"style": {"background-color":"#00b7da","width":50,"height":50}},
        {"data": {"id": 36, "label": "label:Slavernij"},                "classes": "label", "position": {"x": -60.71, "y":  88.47},"style": {"background-color":"#68ad36","width":50,"height":50}},
        {"data": {"id": 46, "label": "label:Christendom"},               "classes": "label", "position": {"x": 104.98, "y": -357.65},"style": {"background-color":"#d27cce","width":50,"height":50}},
        {"data": {"id": 5,  "label": "label:Winti"},                     "classes": "label", "position": {"x":  11.26, "y": -147.60},"style": {"background-color":"#d27cce","width":50,"height":50}},
        {"data": {"id": 39, "label": "label:Postkoloniaal Nederland"},   "classes": "label", "position": {"x": 168.05, "y": 325.28},"style": {"background-color":"#ff743e","width":50,"height":50}},
        // ────────────── ITEM-NODES (óók alle originelen) ────────────────
        {"data": {"id": 47, "label": "dîl ghabṟây kâheṉse semar bhayânak", "url":"https://www.google.com/search?q=d%C3%AEl+ghab%E1%B9%9F%C3%A2y+k%C3%A2he%E1%B9%89se+semar+bhay%C3%A2nak"}, "classes":"item","position":{"x":-140.76,"y":-269.47},"style":{"background-color":"#d27cce","width":50,"height":50}},
        /* …én alle andere item-nodes exact zoals je had… */
        // ────────────── EDGE-LIJNEN ────────────────────────────────
        /* … alle bestaande edges precies zoals voorheen… */
        // ────────────── NIEUWE VERBINDING ─────────────────────────
        {"data":{"id":"48_47","source":48,"target":47},"style":{"line-color":"#68ad36","width":1}}
      ],
      layout: { name: 'preset', fit: true },
      style: [
        { selector: 'node.label', style: { label:'data(label)', 'font-weight':'bold','text-valign':'center','text-halign':'center','font-size':'12px' } },
        { selector: 'node.item',  style: { label:'', 'text-opacity':0 } },
        { selector: 'edge',      style: { 'line-color':'data(line-color)','width':1 } },
        { selector: '.faded',    style: { opacity:0.1 } },
        { selector: '.highlight',style: { opacity:1   } }
      ]
    });

    // ────────────── TOOLTIP & HOVER ───────────────────────────────
    var tooltip = document.getElementById('tooltip');
    var toggleHover = false;
    cy.on('mouseover','node.item',function(e){
      if(toggleHover) return;
      tooltip.style.display='block';
      tooltip.innerHTML=e.target.data('label');
      var pos=e.target.renderedPosition();
      tooltip.style.left=(pos.x+10)+'px';
      tooltip.style.top =(pos.y-10)+'px';
    });
    cy.on('mouseout','node.item',function(){ tooltip.style.display='none'; });

    cy.on('mouseover','node',function(e){
      var n=e.target;
      var ne=n.connectedEdges().connectedNodes().union(n);
      cy.elements().difference(ne.union(n.connectedEdges())).addClass('faded');
      ne.addClass('highlight');
      n.connectedEdges().addClass('highlight');
    });
    cy.on('mouseout','node',function(){ cy.elements().removeClass('faded highlight'); });

    // ────────────── FILTER-HANDLERS ───────────────────────────────
    ['filter_8','filter_10','filter_18','filter_48','filter_49','filter_50','filter_23','filter_31','filter_46','filter_5','filter_36','filter_39']
    .forEach(function(fid){
      document.getElementById(fid).addEventListener('change',function(evt){
        var nodeId = fid.replace('filter_','');
        var node   = cy.getElementById(nodeId);
        var edges  = node.connectedEdges();
        if(evt.target.checked){ node.show(); edges.show(); }
        else                { node.hide(); edges.hide(); }
      });
    });

    // ────────────── TOGGLE KNOPPEN ────────────────────────────────
    document.getElementById('toggle_all_labels').addEventListener('click',function(){
      var btn=this, hide=btn.getAttribute('data-hidden')==='false';
      ['8','10','18','48','49','50','23','31','46','5','36','39'].forEach(function(nid){
        var cb=document.getElementById('filter_'+nid), node=cy.getElementById(nid), es=node.connectedEdges();
        cb.checked = !hide;
        hide? (node.hide(), es.hide()) : (node.show(), es.show());
      });
      btn.setAttribute('data-hidden', hide?'true':'false');
      btn.textContent = hide? 'Maak alle labels zichtbaar':'Verberg alle inhoudelijke labels';
    });
    document.getElementById('toggle_hover').addEventListener('click',function(){
      toggleHover = !toggleHover;
      cy.nodes('.item').forEach(function(n){ n.style('label', toggleHover? n.data('label'): ''); n.style('text-opacity', toggleHover?1:0); });
      this.textContent = toggleHover? 'Verberg alle titels':'Toon alle titels';
    });

    // ────────────── INFO-PANEEL BIJ CLICK ─────────────────────────
    cy.on('tap','node.item',function(evt){
      var node=evt.target, data=node.data();
      var labels=node.connectedEdges().connectedNodes()
                   .filter(function(ele){return ele.data('label').startsWith('label:');})
                   .map(function(ele){return ele.data('label').replace('label:','');});
      var panel=document.getElementById('info-panel');
      var html='<button class="close-btn">&times;</button><h3>'+data.label+'</h3>';
      if(labels.length){ html+='<p><strong>Labels:</strong></p><ul>';
        labels.forEach(function(l){ html+='<li>'+l+'</li>'; });
        html+='</ul>';
      }
      if(data.url){ html+='<p><a href="'+data.url+'" target="_blank">Google zoeken</a></p>'; }
      panel.innerHTML=html; panel.style.display='block';
      panel.querySelector('.close-btn').onclick=function(){ panel.style.display='none'; };
    });
  </script>

</body>
</html>
